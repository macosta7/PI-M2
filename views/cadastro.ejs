<!DOCTYPE html>
<html>
<head>
  <title>Cadastro</title>
  <link rel="stylesheet" href="/css/cadastro.css">
</head>
<body>
  <div class="cadastro-container">
    <div class="cadastro-imagem">
      <img src="/img/salinha.png" alt="Foto da sala" />
    </div>

    <div class="cadastro-formulario">
      <img src="/img/checkin-room.png" class="logo" alt="Logo Checkin Room" />

      <div class="foto-perfil-container">
        <div class="foto-perfil">
          <img src="/img/perfil.jpg" alt="Foto de perfil" id="preview-image" />
          <div class="upload-overlay" onclick="document.getElementById('foto-perfil-input').click()">
            <span class="upload-icon">+</span>
          </div>
        </div>
      </div>

      <% if (typeof erro !== 'undefined') { %>
        <p style="color: red;"><%= erro %></p>
      <% } %>

      <form action="/usuarios" method="POST" enctype="multipart/form-data">
        <input type="file" id="foto-perfil-input" name="foto_perfil" accept="image/*" style="display: none;" onchange="previewImage(this)">
        <input type="text" name="nome" placeholder="Nome completo" required>

        <input type="email" name="email_usuario" placeholder="Email" required>

        <select name="ocupacao_usuario" required>
          <option value="">Selecione sua ocupação</option>
          <option value="aluno">Aluno</option>
          <option value="professor">Professor</option>
          <option value="coordenador">Coordenador</option>
          <option value="recepcao">Recepção</option>
        </select>

        <input type="password" name="senha_usuario" placeholder="Senha" required>

        <button type="submit">CADASTRAR</button>
      </form>

      <p><a href="/login">Já possui conta?</a></p>
    </div>
  </div>

  <script>
    function previewImage(input) {
      if (input.files && input.files[0]) {
        const reader = new FileReader();

        reader.onload = function(e) {
          document.getElementById('preview-image').src = e.target.result;
        };

        reader.readAsDataURL(input.files[0]);
      }
    }
  </script>
</body>
</html>
